{"version":3,"file":"index.js","sources":["../src/js/utils/consts.js","../src/js/services/ButtonService.js","../src/js/template/render-functions.js.js","../src/js/api/pixabay-api.js","../src/js/hendlers/form.js","../src/js/hendlers/scrollPage.js","../src/js/hendlers/loadMore.js","../src/main.js"],"sourcesContent":["const refs = {\n  searchForm: document.querySelector('.js-form'),\n  gallery: document.querySelector('.js-gallery'),\n  notFoundText: document.querySelector('.js-not-found-text'),\n  loader: document.querySelector('.js-loader'),\n  loadMoreBtn: document.querySelector('.js-load-more'),\n};\n\nconst ACTIVE_CLASS = 'active';\n\nconst photoQueryParams = {\n  query: '',\n  page: 1,\n  perPage: 15,\n  maxPage: 1,\n};\n\nexport { refs, ACTIVE_CLASS, photoQueryParams };\n","import { refs } from '../utils/consts';\n\nclass LoadMoreButton {\n  static HIDDEN_CLASS = 'is-hidden';\n\n  constructor(buttonEl) {\n    if (!buttonEl) {\n      throw new Error(\n        'Button element is required to initialize LoadMoreButton.'\n      );\n    }\n    this.button = buttonEl;\n  }\n\n  disable() {\n    this.button.classList.add(LoadMoreButton.HIDDEN_CLASS);\n  }\n\n  enable() {\n    this.button.classList.remove(LoadMoreButton.HIDDEN_CLASS);\n  }\n}\n\nconst loadMoreBtn = new LoadMoreButton(refs.loadMoreBtn);\n\nexport default loadMoreBtn;\n","export const cardsImg = data => {\n  const images = data.hits;\n\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <li class=\"gallery-item\">\n\t\t\t    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t\t\t    <img\n\t\t\t\t\t    class=\"gallery-image\"\n\t\t\t\t\t    src=\"${webformatURL}\"\n\t\t\t\t\t    alt=\"${tags}\"\n\t\t\t\t\t  />\n\t\t\t    </a>\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes:</b> ${likes}\n            </p>\n            <p class=\"info-item\">\n              <b>Views:</b> ${views}\n            </p>\n            <p class=\"info-item\">\n              <b>Comments:</b> ${comments}\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads:</b> ${downloads}\n            </p>\n          </div>\n\t\t    </li>\n      `;\n      }\n    )\n    .join('');\n};\n","import axios from 'axios';\nimport iziToast from 'izitoast';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  key: '49425225-4fab9228e9772b9206d5850f9',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nasync function fetchImages(query, page = 1, perPage = 15) {\n  if (!query.trim()) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a valid search query!',\n    });\n\n    return;\n  }\n  try {\n    const response = await axios.get('', {\n      params: {\n        q: query,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    const { hits, total, totalHits } = response.data;\n\n    return { hits, total, totalHits };\n  } catch (err) {\n    iziToast.error({\n      title: 'Error',\n      message: `Error: ${err}`,\n    });\n  }\n}\n\nexport default fetchImages;\n","import { ACTIVE_CLASS, photoQueryParams, refs } from '../utils/consts.js';\nimport loadMoreBtn from '../services/ButtonService.js';\nimport { cardsImg } from '../template/render-functions.js';\nimport fetchImages from '../api/pixabay-api.js';\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  refs.notFoundText.textContent = '';\n  refs.gallery.innerHTML = '';\n\n  loadMoreBtn.disable();\n  photoQueryParams.page = 1;\n  photoQueryParams.maxPage = 1;\n\n  const form = event.currentTarget;\n  const userQuery = form.elements.user_query.value.trim();\n\n  refs.loader.classList.add(ACTIVE_CLASS);\n\n  try {\n    const images = await fetchImages(userQuery);\n    refs.loader.classList.remove(ACTIVE_CLASS);\n\n    if (!images.hits || images.hits.length === 0) {\n      refs.notFoundText.innerHTML = `Sorry, there are no images matching your search <span class =\"impotent\">${userQuery}</span>. Please try again!`;\n\n      return;\n    }\n\n    photoQueryParams.query = userQuery;\n    photoQueryParams.maxPage = Math.ceil(\n      images.totalHits / photoQueryParams.perPage\n    );\n\n    refs.gallery.innerHTML = cardsImg(images);\n\n    if (photoQueryParams.maxPage > 1) {\n      loadMoreBtn.enable();\n    }\n  } catch (error) {\n    refs.loader.classList.remove(ACTIVE_CLASS);\n    console.log('Error:', error);\n  } finally {\n    form.reset();\n  }\n}\n\nexport default handleSearch;\n","import { refs } from '../utils/consts';\n\nfunction scrollPage() {\n  const elementGallery = refs.gallery.querySelector('.gallery-item');\n\n  if (elementGallery) {\n    const { height } = elementGallery.getBoundingClientRect();\n\n    scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nexport default scrollPage;\n","import fetchImages from '../api/pixabay-api.js';\nimport loadMoreBtn from '../services/ButtonService';\nimport { cardsImg } from '../template/render-functions.js';\nimport { photoQueryParams, refs, ACTIVE_CLASS } from '../utils/consts';\nimport scrollPage from './scrollPage.js';\n\nasync function handleLoadMore(event) {\n  photoQueryParams.page += 1;\n  loadMoreBtn.disable();\n  refs.loader.classList.add(ACTIVE_CLASS);\n\n  try {\n    const { query, page, perPage } = photoQueryParams;\n    const images = await fetchImages(query, page, perPage);\n    refs.gallery.insertAdjacentHTML('beforeend', cardsImg(images));\n\n    refs.loader.classList.remove(ACTIVE_CLASS);\n    loadMoreBtn.enable();\n    scrollPage();\n\n    if (photoQueryParams.page < photoQueryParams.maxPage) {\n      loadMoreBtn.enable();\n    } else {\n      loadMoreBtn.disable();\n      refs.notFoundText.textContent =\n        \"We're sorry, but you've reached the end of search.\";\n    }\n  } catch (error) {\n    console.log('Error:', error);\n    loadMoreBtn.disable();\n  }\n}\n\nexport default handleLoadMore;\n","import { refs } from './js/utils/consts';\nimport handleSearch from './js/hendlers/form';\nimport loadMoreBtn from './js/services/ButtonService';\nimport handleLoadMore from './js/hendlers/loadMore';\nimport SimpleLightbox from 'simplelightbox';\n\nlet lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nrefs.searchForm.addEventListener('submit', async event => {\n  await handleSearch(event);\n  lightbox.refresh();\n});\n\nloadMoreBtn.button.addEventListener('click', async () => {\n  await handleLoadMore();\n  lightbox.refresh();\n});\n"],"names":["refs","ACTIVE_CLASS","photoQueryParams","_LoadMoreButton","buttonEl","__publicField","LoadMoreButton","loadMoreBtn","cardsImg","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","axios","fetchImages","query","page","perPage","iziToast","response","hits","total","totalHits","err","handleSearch","event","form","userQuery","images","error","scrollPage","elementGallery","height","handleLoadMore","lightbox","SimpleLightbox"],"mappings":"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"}